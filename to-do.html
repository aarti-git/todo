<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/todo-style.css" />
    <link rel="stylesheet" type="text/css" href="css/fontawesome.css" />
  </head>
  <body>
    <section class="page-wrapper">
      <div class="header">
        <h1>todos</h1>
      </div>
      <section class="input-desigen">
        <button
          id="down-button"
          onclick="downButtoChecked(this)"
          class="fas fa-chevron-down"
        ></button>
        <input
          type="text"
          name="value"
          placeholder="text area"
          class="text-input"
          id="input"
          onkeyup="myfunction(event)"
        />
      </section>
      <section>
        <ul id="note-list"></ul>
      </section>
      <section class="todo-footer-section">
        <div class="todo-footer">
          <button class="items">items left</button>
          <button class="btn active" onclick="allList()">
            All
          </button>
          <button class="btn" onclick="activList()">
            Active
          </button>
          <button class="btn" onclick="completList(this)">
            completed
          </button>
          <button id="clear-btn">clear list</button>
          <a href="" id="ancher-complet-all">Complete All</a>
        </div>
      </section>
      <section class="about-todo">
        <p>Double-click to edit todo</p>
        <p>creat by Sinder Sortus</p>
        <p>part todoMVC</p>
      </section>
    </section>
    <!--javascript part start-->
    <script>
      var counter = 0;
      var applicationState = "all";
      var downClick = false;
      function myfunction(event) {
        if (event.keyCode === 13) {
          var textNote = document.getElementById("input");
          var n = textNote.value;
          var list = document.createElement("li");
          list.innerHTML =
            "<input type='checkbox' class='checboox-edit' onclick='inputCheckbox(this)''>" +
            "<span id='inputtext' onkeyup='printText(this, event)'>" +
            n +
            "</span>" +
            "<button class='cross-button' onclick='ReMoveList(this)'> x </button>";

          document.getElementById("note-list").appendChild(list);
          list.classList.add("text-input");
          list.classList.add("list-design");
          textNote.value = "";

          var myspan = list.querySelector("#inputtext");
          // var x = myspan.innerText;

          myspan.addEventListener("dblclick", function (event) {
            myspan.innerHTML =
              "<input type='text' name='value' value='" +
              myspan.innerText +
              "' id='editTextWorde''>";

            //console.log(n);
          });

          //new list elemrnt remove in complit list ..
          if (applicationState == "completed") {
            list.style.display = "none";
          }
          // input down button
          var downButton = document.getElementById("down-button");
          downButton.style.display = "block";

          //console.log(n);
          // this code for counter add(+) number items left.
          counter = counter + 1;
          var countNo = document.querySelector(".items");
          countNo.innerHTML = counter + " items left";

          // this code for footer display block or none
          var footerNote = document.querySelector(".todo-footer-section");
          footerNote.style.display = "block";
        }
      }
      //
      //

      function ReMoveList(element) {
        element.parentElement.remove();

        // this code for counter mines(-) number items left.
        counter = counter - 1;
        var countNo = document.querySelector(".items");
        countNo.innerHTML = counter + " items left";
      }

      function printText(el, event) {
        if (event.keyCode === 13) {
          var editText = document.querySelector("#editTextWorde").value;
          el.innerHTML = editText;
          console.log(editText);
        }
      }

      function inputCheckbox(el) {
        var getClearBtn = document.getElementById("clear-btn");
        if (el.checked) {
          console.log("true");
          el.nextSibling.classList.add("checkcss");
          getClearBtn.style.display = "inline-block";
          getClearBtn.style.border = "1px solid #daa520";
          if (applicationState == "active") {
            el.parentElement.style.display = "none";
          }
          //nextsibling is add (chekbox) to input tag and nextsibling is get a span tag (n )
        } else {
          console.log("false");
          el.nextSibling.classList.remove("checkcss");
          getClearBtn.style.display = "none";
          if (applicationState == "completed") {
            el.parentElement.style.display = "none";
          }
        }
        var getClearBtn = document.getElementById("clear-btn");
        getClearBtn.addEventListener("click", function () {
          if (el.checked) {
            el.parentElement.remove();
            getClearBtn.style.display = "none";
          }
        });
      }
      // directly delet list
      // function clearbtton() {
      //   var callcheckbox = document.querySelectorAll(".checboox-edit");
      //   for (var i = 0; i < callcheckbox.length; i++) {
      //     var item = callcheckbox[i];
      //     if (item.checked) {
      //       item.parentElement.remove();
      //     }
      //   }
      // }

      function downButtoChecked(el) {
        var getClearBtn = document.getElementById("clear-btn");
        getClearBtn.style.display = "none";
        var callcheckbox = document.querySelectorAll(".checboox-edit");
        var completAll = document.getElementById("ancher-complet-all");
        for (var i = 0; i < callcheckbox.length; i++) {
          var item = callcheckbox[i];
          var itemParent = item.parentElement;
          if (downClick == false) {
            //conditin true
            item.checked = true;
            item.nextSibling.classList.add("checkcss");
            completAll.style.display = "inline-block";
            completAll.classList.add("complet-all-clickbtn");
            // clear buttonadd
            completAll.addEventListener("click", function () {
              myfunction(event).reload();
            });
          } else {
            item.checked = false;
            item.nextSibling.classList.remove("checkcss");
          }
        }
        downClick = !downClick;
      }

      function allList() {
        applicationState = "all";
        console.log(applicationState);

        var callcheckbox = document.querySelectorAll(".checboox-edit");
        for (var i = 0; i < callcheckbox.length; i++) {
          var item = callcheckbox[i];
          var itemParent = item.parentElement;
          itemParent.style.display = "block";
        }
      }

      function completList(myel) {
        applicationState = "completed";
        console.log(applicationState);

        var callcheckbox = document.querySelectorAll(".checboox-edit");
        for (var i = 0; i < callcheckbox.length; i++) {
          var item = callcheckbox[i];
          var itemParent = item.parentElement;

          if (item.checked) {
            itemParent.style.display = "block";
          } else {
            itemParent.style.display = "none";
          }
        }
      }

      function activList() {
        applicationState = "active";
        console.log(applicationState);

        var callcheckbox = document.querySelectorAll(".checboox-edit");
        for (var i = 0; i < callcheckbox.length; i++) {
          var item = callcheckbox[i];
          var itemParent = item.parentElement;

          if (item.checked) {
            itemParent.style.display = "none";
          } else {
            itemParent.style.display = "block";
          }
        }
      }

      var btnHeader = document.querySelector(".todo-footer");
      var btns = btnHeader.getElementsByClassName("btn");
      for (var i = 0; i < btns.length; i++) {
        btns[i].addEventListener("click", function () {
          var current = document.getElementsByClassName("active");
          current[0].className = current[0].className.replace(" active", "");
          this.className += " active";
        });
      }
    </script>
  </body>
</html>
